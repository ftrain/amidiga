[env:teensy41]
platform = teensy
board = teensy41
framework = arduino

; C++ standard
build_flags =
    -std=c++17
    -DUSB_MIDI
    -DUSB_MIDI_SERIAL
    -Wall
    -Wextra
    -DLUA_OK=0  ; Lua 5.1 compatibility (LuaArduino uses Lua 5.1)

; Library dependencies
lib_deps =
    blackketter/LuaArduino @ ^1.0.0

; Source directories - use teensy-specific source
build_src_filter =
    +<*>
    +<../core/*>
    +<../hardware/*>
    +<../lua_bridge/*>
    -<../desktop/*>

; Build options
monitor_speed = 115200

; Optimization
build_type = release

; Upload options
upload_protocol = teensy-gui
upload_port = /dev/ttyACM0

; Debug options (optional)
debug_tool = jlink
debug_init_break = tbreak setup
